---
ms.assetid: 814857C5-D54E-469F-97ED-EE1CAA0156BB
title: Руководством по переносу приложения на рабочем столе
description: Простое объяснение того, как для отделения существующих форм Windows или приложениях WPF для создания кросс платформенные приложения под управлением macOS, iOS, Android, а также универсальной платформы Windows и Windows 10.
author: asb3993
ms.author: amburns
ms.date: 04/26/2017
ms.openlocfilehash: 3d3af9c78b7486e7ebfb063a3cb00fabdbd0f5b7
ms.sourcegitcommit: 6be6374664cd96a7d924c2e0c37aeec4adf8be13
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 11/13/2018
ms.locfileid: "51617544"
---
# <a name="desktop-app-porting-guidance"></a>Руководством по переносу приложения на рабочем столе

Большая часть кода приложения можно отнести к одному из следующих областей:

* Код пользовательского интерфейса (например) окна и кнопки)
* элементов управления сторонних (например) диаграммы)
* Бизнес-логики (например) правила проверки)
* Хранение локальных данных и доступа
* Веб-служб и удаленного доступа к данным

Для приложений Windows Forms и WPF, написанных с C# (или Visual Basic.NET) поразительно большого количества бизнес-логики, доступ к локальным данным и веб-служб кода могут совместно использоваться платформ.

## <a name="net-portability-analyzer"></a>Анализатор переносимости .NET

Поддержка Visual Studio 2015 и 2017 [анализатор переносимости .NET](https://docs.microsoft.com/dotnet/articles/standard/portability-analyzer) ([скачать для Windows](https://marketplace.visualstudio.com/items?itemName=ConnieYau.NETPortabilityAnalyzer)) которого можно проверить существующие приложения и сообщит о том, какая часть кода можно перенести «как есть» и других платформ . Дополнительные сведения о нем из этого [видео Channel 9](https://channel9.msdn.com/Blogs/Seth-Juarez/A-Brief-Look-at-the-NET-Portability-Analyzer).

Также имеется средство командной строки можно загрузить из [анализатор переносимости на сайте GitHub](https://github.com/Microsoft/dotnet-apiport) и используются для обеспечения такие же отчеты.

## <a name="x-of-my-code-is-portable-what-next"></a>«x % кода является переносимым. Что дальше?»

Будем надеяться, что анализатор сообщает большой, можно переносить часть кода, но определенно будет иметь некоторые части каждое приложение, _нельзя_ перемещать на другие платформы.

Различные фрагменты кода, возможно, попадает в одну из этих сегментов, более подробно ниже:

* Повторно готовый к применению переносимого кода
* Код, который требует внесения изменений
* Код, который нельзя перенести и требует перезаписи

### <a name="re-useable-portable-code"></a>Повторно готовый к применению переносимого кода

Код .NET, написанный для API, доступных на всех платформах можно создавать кросс платформенных без изменений. В идеале вы сможете переместить этот код в переносимой библиотеки классов, общая библиотека или библиотека .NET Standard, а затем в рамках существующего приложения.

Затем, общей библиотеки можно добавить к проектам приложений для других платформ (например, Android, iOS, macOS).

### <a name="code-that-requires-changes"></a>Код, который требует внесения изменений

Некоторые интерфейсы API .NET, не могут быть доступны на всех платформах. Если эти интерфейсы API существует в коде, необходимо повторно записать эти разделы, чтобы использовать кроссплатформенные API-интерфейсы.

Примеры включают использование API-интерфейсов отражения, доступных в .NET 4.6, но не доступны на на всех платформах.

После повторного написания кода, с помощью переносимых API, можно упаковать этот код в общей библиотеке, и протестировать его в приложение.

### <a name="code-that-isnt-portable-and-requires-a-re-write"></a>Код, который нельзя перенести и требует перезаписи

Примеры кода, который будет платформ:

- **Пользовательский интерфейс** — экраны Windows Forms или WPF не может использоваться в проектах на платформе Android или iOS, например. Пользовательского интерфейса должны быть повторно написаны с помощью этого [сравнение элементов управления](~/cross-platform/desktop/controls/index.md) как ссылка.

- **Платформы хранения** -код, основанный на технологии платформы (например, локальный SQL Server Express базы данных). Вам потребуется повторно пишете, используя это альтернативное решение платформ (например, SQLite для компонента database engine).
Некоторые операции файловой системы также может потребоваться изменить, так как в приложениях UWP есть несколько разных интерфейсов API для Android и iOS (например) Некоторые файловые системы учитывают регистр и другие не).

- **компонентов сторонних производителей** — проверяет наличие компонентов сторонних производителей в приложениях на других платформах. Некоторые из них, таких как пакеты NuGet невизуальный, могут быть доступны другие (особенно визуальные элементы управления как диаграммы или мультимедиа-проигрыватели)

## <a name="tips-for-making-code-portable"></a>Советы по выполнению переносимого кода

- **Внедрение зависимостей** — определить разные реализации для каждой платформы и

- **Многоуровневого подхода** — определяет MVVM, MVC, MVP или другая схема, которая помогает отделить переносимого кода от кода для конкретных платформ.

- **Обмен сообщениями** — передачи сообщений можно использовать в коде отмены зависимости между взаимодействий между разными частями приложения.
