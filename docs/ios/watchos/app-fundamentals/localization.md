---
title: Работа с watchOS локализации в Xamarin
description: В этом документе описывается, как для локализации приложения watchOS, созданные с помощью Xamarin. Здесь рассматриваются приложения watch, расширения Контрольные значения, строки в коде, раскадровки, текста, тестирование и многое другое.
ms.prod: xamarin
ms.assetid: 55834877-757B-4860-AF2F-933A948BE38D
ms.technology: xamarin-ios
author: lobrien
ms.author: laobri
ms.openlocfilehash: 1d124a1bac751035d2b2e654f2dc411381158fc8
ms.sourcegitcommit: be6f6a8f77679bb9675077ed25b5d2c753580b74
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 12/07/2018
ms.locfileid: "53059328"
---
# <a name="working-with-watchos-localization-in-xamarin"></a>Работа с watchOS локализации в Xamarin

_Адаптация приложений watchOS для нескольких языков_

![](localization-images/both-languages-sml.png "Отображение локализованное содержимое Apple Watch")

приложения для watchOS локализуются с помощью методов стандартных операций ввода-вывода:

- С помощью **ИД локализации** с элементами раскадровки
- **.strings** файлов, связанных с раскадровкой, и
- **Localizable.strings** файлы для текста, используемый в коде.

По умолчанию раскадровки и ресурсы расположены в **базы** directory и переводы для конкретного языка и другие ресурсы хранятся в **.lproj** каталоги.
iOS и OS Контрольные значения будут автоматически использовать выбранный язык пользователя для загрузки правильных строк и ресурсы.

Так как приложение Apple Watch состоит из двух частей — приложение просмотра и расширение просмотра - локализованную строку, ресурсы не требуется в двух местах, в зависимости от того, как они используются.

Локализованный текст и ресурсы будут *различных* в приложении для Apple watch и расширение просмотра.

## <a name="watch-app"></a>Приложения Watch

Приложение просмотра содержит раскадровки, который описывает пользовательский интерфейс приложения. Все элементы управления (такие как `Label` и `Image`) наличия поддержки локализации **ИД локализации**.

Каждый языковой **.lproj** каталог должен содержать **.strings** файлы с помощью переводы для каждого элемента (с помощью **ИД локализации**), а также изображения ссылка на раскадровку.

## <a name="watch-extension"></a>Расширение просмотра

Расширение просмотра —, где выполняется код приложения. Любой текст, отображаемый для пользователя из кода должен быть локализованы в модуле, а не в приложении для Apple watch.

Расширения также должен содержать конкретного языка **.lproj** каталоги, но **.strings** файлов требуется только переводы для текста, который используется в коде.

## <a name="globalizing-the-watch-solution"></a>Глобализация решение контрольных значений

Глобализация — это процесс создания локализуемого приложения.
Для приложения watch, это означает, что проектирование раскадровки с разной длины текста в виду обеспечивая каждый макет экрана изменяется соответствующим образом в зависимости от того, какой текст отображается. Необходимо также убедиться, все строки, на которые ссылается код расширения Контрольные значения могут быть преобразованы с помощью `LocalizedString` метод.

### <a name="watch-app"></a>Приложения Watch

По умолчанию приложении для Apple watch не настроен для локализации. Вам потребуется переместить файл раскадровки по умолчанию и создать некоторые каталоги для переводов.

1. Создание **Base.lproj** directory и перемещения **Interface.storyboard** в него.

2. Создание  **<language>.lproj** каталоги для каждого языка, которая должна поддерживаться.

3. **.Lproj** должен содержать каталоги **Interface.strings** текстового файла (имя файла должно соответствовать имени storboard). При необходимости можно поместить все образы, которые требуют локализации в этих каталогах.

После этих изменений были внесены (только английский и испанский язык, были добавлены файлы), в проект приложения watch выглядит следующим образом:

  ![](localization-images/watchapp-solution.png "Проект приложения watch с файлами языка английский и испанский")

#### <a name="storyboard-text"></a>Текст раскадровки

При изменении раскадровки, выберите каждый элемент и обратите внимание, что **ИД локализации** , отображаемый в **свойства** панели:

  [![](localization-images/storyboard-sml.png "ИД локализации, который отображается в панели свойств")](localization-images/storyboard.png#lightbox)

В **Base.lproj** папки, создание пары "ключ значение", как показано ниже, где ключ формируется из **ИД локализации** и соединенная с именем свойства элемента управления, точку (`.`).

```csharp
"AgC-eL-Hgc.title" = "WatchL10nEN"; // interface controller title
"0.text" = "Welcome to WatchL10n"; // Welcome
"1.text" = "Language settings are in Apple Watch App"; // How to change language
"2.title" = "Greetings"; // Greeting
"6.title" = "Detail";
"39.text" = "Second screen";
```

Обратите внимание, что в этом примере, **ИД локализации** может быть простой строки чисел (например) «0», «1», и т.д.) или более сложную строку (например, «АРУ eL-Hgc»). `Label` элементы управления имеют `Text` свойство и `Button`имеют `Title` свойство, которое отражается в способе их локализованные значения устанавливаются - обязательно используйте имя свойства в нижний регистр, как показано в приведенном выше примере.

При отображении раскадровки в watch правильные значения будет автоматически извлекаются и отображаются в соответствии с на языке, выбранном пользователем.

#### <a name="storyboard-images"></a>Изображения раскадровки

В примере решения также включает **gradient@2x.png** изображения в папке каждого языка. Этот образ может быть разным для каждого языка (например) он встроенных текст, который должен преобразования, или использовать локализованные иллюстрациях).

Просто задайте изображения **изображение** свойства в раскадровку и правильное изображение отображается в watch согласно языку, выбранного пользователем.

![](localization-images/storyboard-image.png "Свойства изображения образа в раскадровке")

Примечание: поскольку все Apple Watches дисплеями Retina, только **@2x** необходима версия образа. Необходимо указать **@2x** в раскадровке.

### <a name="watch-extension"></a>Расширение просмотра

Расширение просмотра требуется схожую структуру каталогов для поддержки локализации, тем не менее есть нет раскадровки. Локализованные строки в расширении доступны только те, которые ссылаются C# кода.

![](localization-images/watchextension-solution.png "Структуру каталогов Контрольное значение расширения для поддержки локализации")

#### <a name="strings-in-code"></a>Строки в коде

**Localizable.strings** файл имеет немного другую структуру если он был связан с помощью раскадровки. В этом случае мы можем выбрать любую строку «key»; Apple рекомендуется использовать ключ, который отражает фактический текст, который будет отображаться на языке по умолчанию:

```csharp
"Breakfast time" = "Breakfast time!"; // morning
"Lunch time" = "Lunch time!"; // midday
"Dinner time" = "Dinner time!"; // evening
"Bed time" = "Bed time!"; // night
```

`NSBundle.MainBundle.LocalizedString` Метод используется для разрешения в аналогичными переведенные строки, как показано в приведенном ниже коде.

```csharp
var display = "Breakfast time";
var localizedDisplay =
  NSBundle.MainBundle.LocalizedString (display, comment:"greeting");
displayText.SetText (localizedDisplay);
```

#### <a name="images-in-code"></a>Образы в коде

Образы, которые заполняются кода можно задать двумя способами.

1. Вы можете изменить `Image` управления путем изменения его значения в строковое имя изображения, уже существует в приложении для Apple Watch, например:

  ```csharp
  displayImage.SetImage("gradient"); // image in Watch App (as shown above)
  ```

2. Можно переместить изображения из расширения watch с помощью `FromBundle` приложение будет автоматически выбран правильный рисунок для выбранного пользователем языка. В этом примере решения — это образ **language@2x.png** на этих языках, отображается папка и ее на `DetailController` следующим образом:

  ```csharp
  using (var image = UIImage.FromBundle ("language")) {
    displayImage.SetImage (image);
  }
  ```

  Обратите внимание, что необходимо указать **@2x** применительно к имени файла изображения.

Второй метод также применяется, если вы скачаете образ с удаленного сервера для подготовки к просмотру в watch; Тем не менее в этом случае следует убедиться, что образ, который можно скачать правильно локализуется в соответствии с предпочтениями пользователя.

## <a name="localization"></a>Локализация

После настройки решения, программы-переводчики разговорного будет полностью обработать ваш **.strings** файлы и изображения для каждого языка, которая должна поддерживаться.

Можно создать столько **.lproj** каталоги как вам нужно (по одному для каждого поддерживаемого языка). Они именуются с помощью кодов языка, таких как **en**, **es**, **de**, **Япония**, **pt-BR**, и т.д. (для английского языка Испанский, немецкий, японский и португальский (Бразилия) соответственно).

Прилагаемый пример использует переводы (сгенерированный) демонстрирует, как локализовать приложение watchOS.

### <a name="watch-app"></a>Приложения Watch

Эти значения используются для преобразования пользовательского интерфейса, определенные в приложение watch раскадровки. *Ключ* значение представляет собой сочетание каждого элемента управления раскадровки **ИД локализации** и преобразуемого свойства.

Рекомендуется добавлять комментарии, содержащий исходный текст в файл, чтобы переводчики могли понять, какой должна быть перевод.

#### <a name="eslprojinterfacestrings"></a>es.lproj/Interface.strings

Ниже приведены строки испанского языка (машинного перевода) для раскадровки. Полезно добавлять комментарии к каждой строке, так как это сложно знать, что **ИД локализации** ссылается на, в противном случае:

```csharp
"AgC-eL-Hgc.title" = "Spanish"; // app screen heading
"0.text" = "Bienvenido a WatchL10n"; // Welcome to WatchL10n
"1.text" = "Ajustes de idioma están en Apple Watch App"; // Change the language in the Apple Watch App
"2.title" = "Saludos"; // Greetings
"6.title" = "2nd"; // second screen heading
"39.text" = "Segunda pantalla"; // second screen
```

### <a name="watch-extension"></a>Расширение просмотра

Эти значения используются в коде, чтобы перевод данных до их отображения пользователю. *Ключ* выбрана разработчиком, пока они пишут код и обычно содержит строка для перевода.

#### <a name="eslprojlocalizablestrings-file"></a>файл es.lproj/Localizable.strings

Строки языка Spansish (машинного перевода):

```csharp
"Breakfast time" = "la hora del desayuno"; // morning
"Lunch time" = "hora de comer"; // midday
"Dinner time" = "hora de la cena"; // evening
"Bed time" = "la hora de dormir"; // night
```

## <a name="testing"></a>Тестирование

Метод может изменять языковые параметры отличается от симулятора и физическими устройствами.

### <a name="simulator"></a>Имитатор

В симуляторе, выберите язык для проверки с помощью iOS **параметры** приложения (значок шестеренки, серую на главном экране симулятор).

  ![](localization-images/sim-settings-sml.png "Параметры локализации приложения iOS")

### <a name="watch-device"></a>Устройство контрольных значений

При тестировании с контрольным значением, изменить язык Контрольные значения в **Apple Watch** приложение на парном iPhone.

  ![](localization-images/phone-settings-sml.png "Изменить язык Контрольные значения в приложении для Apple Watch на парном iPhone")



## <a name="related-links"></a>Связанные ссылки

- [WatchLocalization (пример)](https://developer.xamarin.com//samples/monotouch/watchOS/WatchLocalization/)
