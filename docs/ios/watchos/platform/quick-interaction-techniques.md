---
title: Быстрые методы взаимодействия для watchOS 3 в Xamarin
description: В этой статье рассматриваются быстрые методы взаимодействия Apple добавленные в watchOS 3, а также способы их реализации в Xamarin.iOS для Apple Watch.
ms.prod: xamarin
ms.assetid: 26697F68-AF7E-4A36-988F-85E2674A4DD1
ms.technology: xamarin-ios
author: lobrien
ms.author: laobri
ms.date: 03/17/2017
ms.openlocfilehash: 6a8e74860efd606ae6dd565ea7e3f67884eefc11
ms.sourcegitcommit: e268fd44422d0bbc7c944a678e2cc633a0493122
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/25/2018
ms.locfileid: "50103222"
---
# <a name="quick-interaction-techniques-for-watchos-3-in-xamarin"></a>Быстрые методы взаимодействия для watchOS 3 в Xamarin

_В этой статье рассматриваются быстрые методы взаимодействия Apple добавленные в watchOS 3, а также способы их реализации в Xamarin.iOS для Apple Watch._

Обеспечивает взаимодействие с пользователем быстрого необходимы для создания привлекательных приложений Apple Watch и трудности. Новое для watchOS 3, Apple была добавлена поддержка распознавателей жестов, доступ к цифровой корона и новые методы уведомления пользователей и навигации. Это, а также добавлена поддержка SceneKit и SpriteKit, позволяют разработчикам легко создавать подробные и glanceable интерфейсы, которые легко и быстро реагирующих.

## <a name="what-are-quick-interactions"></a>Что такое быстрое взаимодействие

Для разработчика, который используется для создания приложений для iOS или macOS (где количество времени, которое пользователь тратит взаимодействуют с приложением, измеряется в часах или минутах), разработке успешного приложения для Apple Watch может быть сложной задачей и требует другой подход.

В watchOS обычно пользователю необходимо вызывать их запястья быстро взаимодействуют с приложением (обычно длятся несколько секунд), а затем удалите их запястья и по-прежнему бы это ни было они делают.

Ниже приведены некоторые примеры типичных быстрого взаимодействия на Apple Watch:

- Запуск таймера.
- Проверка погоды.
- Пометка элемента из списка задач.

Для достижения этих целей, должны соблюдаться приложение в Apple Watch.

- **Glanceable** -это означает, что с краткий обзор пользователя должны иметь возможность получить необходимую информацию. 
- **Практические** -что означает, что пользователи должны иметь возможность принимать хорошо обдуманные решения.
- **Быстрые** -означающее пользователь никогда не должна ждать получать сведения, которые им нужны или для достижения им действие.

### <a name="quick-interactions-length"></a>Длина быстрого взаимодействия

Из-за характера glanceable приложений Apple Watch, Apple предполагает, что идеально длину быстрое взаимодействие должно быть две секунды или меньше. В результате этого два предел второй разработчику потребуется тратят значительное время, как проектирование и реализация приложения Apple Watch. 

## <a name="new-watchos-3-features-and-apis"></a>Новый watchOS 3 функции и API

Apple добавлено несколько новых функций и API-интерфейсы WatchKit для помощи разработчика при добавлении быстрого взаимодействия приложений Apple Watch:

- watchOS 3 предоставляет доступ к новые типы пользовательского ввода, такие как:
    - Средства распознавания жестов
    - Цифровой корона поворота 
- watchOS 3 предоставляет новые способы отображения и обновления сведений, таких как:
    - Улучшенная Навигация по таблице
    - Поддержка новых framework уведомление пользователя
    - Интеграция SpriteKit и SceneKit

Путем реализации этих новых функций, разработчик может обеспечить их watchOS 3 приложения Glanceable, актуальной и выполняет.

### <a name="gesture-recognizer-support"></a>Поддержка распознаватель жестов

Если разработчик реализовала распознавателей жестов в iOS, они должны быть хорошо знакомы принципы работы средства распознавания жестов в watchOS 3. Для обновления, средства распознавания жестов являются объектами, разбивающий события касания низкого уровня на жесты, распознаваемые, предварительно определенные.

watchOS 3 поддерживает следующие четыре распознавателей жестов:

- Типы дискретных жестов:
    - Жест прокрутки (`WKSwipeGestureRecognizer`).
    - Жест касания (`WKTapGestureRecognizer`).
- Типы непрерывной жестов:
    - Жест Pan (`WKPanGestureRecognizer`).
    - Жест долго Press (`WKLongPressGestureRecognizer`).

Чтобы реализовать один из новых распознавателей жестов, просто перетащите его на поверхность разработки в iOS Designer в Visual Studio для Mac и настройте его свойства.

В коде отвечать на действия распознавателя для обработки жест активируется пользователь. Опять же это делается так же, как будут обрабатываться в iOS.

#### <a name="discrete-gesture-states"></a>Дискретных состояний жестов

Для дискретных жестов действие вызывается после распознавания жестов и состояние (`WKGestureRecognizerState`) присваивается в качестве:

[![](quick-interaction-techniques-images/quick01.png "Дискретных состояний жестов")](quick-interaction-techniques-images/quick01.png#lightbox)

Изначально все дискретные жесты в `Possible` состояния и перехода в один `Failed` или `Recognized` состояния. При использовании дискретных жесты, разработчик обычно не обрабатывает непосредственно с состоянием. Вместо этого они используют действия, вызываемого, когда жест распознается только.

#### <a name="continuous-gesture-states"></a>Непрерывная состояния жеста

Непрерывная жесты, немного отличаются от дискретных жесты, где действие вызывается несколько раз, как жест распознается:

[![](quick-interaction-techniques-images/quick02.png "Непрерывная состояния жеста")](quick-interaction-techniques-images/quick02.png#lightbox)

Опять же, непрерывной жесты запускается в `Possible` состояние, но они выполняется через несколько обновлений. Здесь разработчику нужно будет учитывать состояния распознавателя и пользовательском Интерфейсе приложения во время обновления `Changed` этап, пока наконец не жест `Recognized` или `Canceled`.

#### <a name="gesture-recognizer-usage-tips"></a>Советы по использованию распознаватель жестов

При работе с распознавателей жестов в watchOS 3, Apple предлагает следующее:

- Добавьте распознавателей жестов элементы группы вместо отдельных элементов управления. Так как Apple Watch имеет меньший размер физического экрана, группы элементов, как правило, больше и проще целевые объекты для пользователя. Кроме того распознавателей жестов могут конфликтовать с встроенными жестов уже в собственные элементы управления пользовательского интерфейса.
- Установите отношения зависимости в приложение watch раскадровки.
- Некоторые жест имеют приоритет над других типов жестов, таких как:
    - Прокрутка
    - Force Touch
 
### <a name="digital-crown-rotation"></a>Цифровой корона поворота

Путем реализации цифровых корона поддержки в своих приложениях watchOS 3, разработчик может предоставить повышенную переходов взаимодействия скорости и точности для своих пользователей.

С момента watchOS 2, может использовать приложение Apple Watch `WKInterfacePicker` объект для доступа к цифровой корона, предоставляя список `WKPickerItems` и выбора стиля (список, с накоплением или последовательность изображений). затем watchOS разрешено пользователю использовать цифровые корона выбрать элемент из списка.

При использовании `WKInterfacePicker`, WatchKit обрабатывает большую часть работы по:

- Рисование списка и элементы отдельного интерфейса.
- Обработка событий цифровой корона.
- Действие вызова в том случае, когда элемент выбран.

Новое для watchOS 3, разработчик теперь имеет прямой доступ к событиям поворота цифровой корона, что позволяет им создавать свои собственные элементы пользовательского интерфейса, которые отвечают на значений поворота.

Главная доступ в электронном виде предоставляются следующие элементы:

- `WKCrownSequencer` -Обеспечивает доступ к оборотов в секунду.
- `WKCrownDelegate` -Обеспечивает доступ к вращения разностные события.

#### <a name="rotations-per-second"></a>Оборотов в секунду

Доступ к поворотов в секунду из цифровой корона полезно в том случае, при работе с физики основе анимации. Чтобы получить доступ к поворотов в секунду, используйте `CrownSequencer` свойство `WKInterfaceController` расширения контрольных значений. Пример:

```csharp
var rotationsPerSecond = CrownSequencer.RotationsPerSecond;
```

#### <a name="rotational-deltas"></a>Циклическая «дельты»

Используйте вращения разностные данные из цифровой корона подсчитать число поворотов. Используйте `CrownDidRotate` переопределение метода `WKCrownDelegate` для доступа к вращения «дельты». Пример:

```csharp
using System;
using WatchKit;
using Foundation;

namespace MonkeyWatch.MonkeySeeExtension
{
    public class CrownDelegate : WKCrownDelegate
    {
        #region Computed Properties
        public double AccumulatedRotations { get; set;}
        #endregion

        #region Constructors
        public CrownDelegate ()
        {
        }
        #endregion

        #region Override Methods
        public override void CrownDidRotate (WKCrownSequencer crownSequencer, double rotationalDelta)
        {
            base.CrownDidRotate (crownSequencer, rotationalDelta);

            // Accumulate rotations
            AccumulatedRotations += rotationalDelta;
        }
        #endregion
    }
}
```

Здесь приложение поддерживает некий Накапливающий сумматор (`AccumulatedRotations`) чтобы определить число поворотов. Один полный поворот цифровой корона равен накопленные delta `1.0` и половина поворот бы `0.5`.

Apple покинул его разработчик должен определить, как счетчики поворота соответствуют учет изменений на обновление элемента пользовательского интерфейса.

Знак (`+/-`) вращения разностных указывает направление, что пользователь преобразовала цифровой корона:

[![](quick-interaction-techniques-images/quick03.png "Знак вращения разностных указывает направление, что пользователь преобразовала цифровой корона")](quick-interaction-techniques-images/quick03.png#lightbox)


Если пользователь прокручивает вверх, WatchKit возвращает положительное изменения, а также если прокрутка вниз отрицательное «дельты» будет возвращено, независимо от того, какие ориентации пользователя носить watch на.

#### <a name="digital-crown-focus"></a>Цифровой корона фокус

Так же, как и другие элементы интерфейса цифровой корона использует концепцию фокус. Этот фокус можно перемещать из цифровой корона для других элементов интерфейса, в зависимости от того, как пользователь взаимодействует с часами. 

Например любой из следующих элементов управления может похитить фокус цифровой корона:

- Средство выбора
- Slider
- Прокрутка контроллера

Это разработчик должен определить, когда предметом внимания цифровой корона по элементу пользовательского интерфейса. Apple предлагает, использовать новые средства распознавания жестов для получения фокуса в пользовательский элемент пользовательского интерфейса.

### <a name="vertical-paging"></a>Вертикального разбиения на страницы

Является стандартным способом, что пользователь переходит в табличное представление в приложении watchOS прокрутите до нужного фрагмента данных, нажмите в определенной строке для отображения в представлении подробных сведений нажмите кнопку "Назад" после завершения, просмотр сведений о и повторите процедуру для любой другой информации, в таблице y заинтересованы в из:

[![](quick-interaction-techniques-images/quick04.png "Перемещение между таблицей и представлении «Подробности»")](quick-interaction-techniques-images/quick04.png#lightbox)

Новое для watchOS 3, разработчик может предоставить вертикального разбиения на страницы на своих элементах управления таблицы представления. Эта функция включена пользователь может перемещаться, чтобы найти строку таблицы представления и выберите строку, чтобы просмотреть его данные как перед. Тем не менее они могут теперь считайте копии выберите следующую строку в таблице или вниз, чтобы выбрать предыдущую строку (или используйте цифровой корона), все это без необходимости, чтобы вернуться к представлению таблицы сначала:

[![](quick-interaction-techniques-images/quick05.png "Перемещение между таблицей и подробное представление и проведение пальцем по экрану вверх и вниз для перемещения между других строк")](quick-interaction-techniques-images/quick05.png#lightbox)

Чтобы включить этот режим, откройте приложения watchOS раскадровки в Xcode для редактирования, выберите вид таблицы и проверьте **вертикальной детализации разбиение по страницам** флажок:

[![](quick-interaction-techniques-images/quick06.png "Установите флажок вертикальной детализации разбиение по страницам")](quick-interaction-techniques-images/quick06.png#lightbox)

Убедитесь, что в таблице служит для отображения в представлении подробных сведений и сохранить изменения в раскадровку и вернитесь в Visual Studio для Mac для синхронизации Segues.

Разработчик позволяет программно привлекать вертикального разбиения на страницы на определенные строки, используя следующий код для представления таблицы:

```csharp
// Segue into Vertical Paging and select the first row
MenuTable.PerformSegue (0);
```

При использовании вертикального разбиения по страницам, то разработчик должен Имейте в виду, что WatchKit автоматически обработает предварительная загрузка контроллеров, и таким образом, некоторые методы жизненного цикла контроллера может быть вызван, прежде чем фактически отображается пользовательский Интерфейс.

### <a name="notification-enhancements"></a>Улучшения уведомлений

Уведомления являются основной формой быстрого взаимодействия, который обычно выражается для пользователя на watchOS и были доступны с момента первого Apple Watch и watchOS 1.

Типичного взаимодействия быстрого уведомлений выглядит следующим образом:

1. Пользователь считает Haptic уведомление, когда поступает новое уведомление.
2. Они создают их запястье, чтобы просмотреть краткое выглядеть интерфейс для уведомления.
3. Если они продолжают поддерживать их запястья возникает, watchOS система автоматически перейдет в интерфейс Long выглядеть уведомление.

Существует несколько способов, которые пользователь может ответить на уведомление:

- Для хорошо определенные и представления уведомлений пользователь не выполнять никаких действий и просто закрыть уведомление.
- Также они могут коснуться уведомления, чтобы запустить приложение watchOS.
- Уведомления, которое поддерживает настраиваемые действия пользователь может выбрать одно из пользовательских действий. Это могут быть:
    - **Передний план действий** -они запускают приложение для выполнения действия.
    - **Фоновые действия** — всегда направляются iPhone в watchOS 2, но могут передаваться на watchApp в watchOS 3.

Новое в watchOS 3:

* Уведомление использует аналогичный API-Интерфейсы на всех платформах (iOS, watchOS, tvOS и macOS).
* Локальные уведомления могут быть назначены на Apple Watch.
* Уведомлений в фоновом режиме будет перенаправлен к расширению приложения, если они были запланированы на Apple Watch.

#### <a name="notification-scheduling-and-delivery"></a>Уведомление планирования и доставки

Уведомления от пользователя iPhone будет вперед для Apple Watch, в следующих случаях:

* Экран iPhone — off.
* Apple Watch надет и разблокирована.

В watchOS 3 локальные уведомления могут быть назначены на Apple Watch и предоставляются только в watch. Это разработчик может запланировать соответствующий iPhone уведомление, если он необходим для приложения.

Включая тот же идентификатор уведомления на Apple Watch и iPhone версиях уведомления, она препятствует повторяющихся уведомлений будут отображаться на часы. Apple Watch версию уведомление будет иметь приоритет над версии для iPhone.

Так как watchOS 3 использует тот же `UINotification` API платформы iOS 10, см. в разделе iOS 10 [Framework уведомление пользователя](~/ios/platform/user-notifications/index.md) документации для получения дополнительных сведений.

### <a name="using-spritekit-and-scenekit"></a>С помощью SpriteKit и SceneKit

Новое для watchOS 3, разработчик теперь можно использовать объекты SpritKit и SceneKit в свое приложение пользовательского интерфейса конструктора для представления двухмерной и трехмерной графики.

Для поддержки этой возможности были добавлены два новых класса интерфейса:

- `WKInterfaceSKScene` — Для работы с двумерной графики SpriteKit.
- `WKInterfaceSCNScene` — Для работы с трехмерной графикой SceneKit.

Чтобы использовать эти объекты, просто перетащите их в область конструктора внутри приложения watch раскадровки в Interface Builder в Xcode и **инспектор атрибутов** для их настройки.

С этого момента работа с кадром SceneKit или SpriteKit работает так же, как это происходит внутри приложения iOS. Будут представлены в приложении для Apple watch `WKInterfaceSKScene` путем вызова одного из `Present` методы. SceneKit, просто установите `Scene` свойство `WKInterfaceSCNScene` объекта.

## <a name="actionable-complications"></a>Практические сложностей

В watchOS 2 Apple представила сложности для сторонних приложений. В watchOS 3 Apple расширила возможности, которые разработчик может включать в усложнения WatchKit. 

Кроме того, несколько встроенных в watch лиц теперь можете включать сложностей и существующие контрольные значения лиц, что уже поддерживаемых сложности может теперь включено еще больше сложностей.

Также новые возможности для пользователя быстро пальцем влево или вправо для перехода по всем грани Контрольные значения, которые они установили на их Apple Watch. С помощью новой коллекции на Apple Watch сопутствующее iPhone приложение, пользователю можно добавлять и настраивать новые лица контрольных значений и любой из сложностей, которые они могут включать.

Из-за этих новых функций Apple предлагает каждое приложение на Apple Watch также должна содержать по крайней мере один усложнения и таким образом, все приложения Native Apple Watch теперь имеют сложностей.

Сложности предоставляют следующие возможности для приложения:

- Они являются очень glanceable, так как они всегда присутствуют на циферблате.
- Сложности часто обновляются, watchOS. Любое приложение, которое включает в себя усложнения на текущую отображаемую циферблате пользователя обновляется по крайней мере в два раза в час.
- Любое приложение со сложностью на текущую отображаемую циферблате пользователя сохраняется в памяти, что делает приложение быстрого запуска и повысить скорость ответов из приложения.
- Сложности облегчают пользователю запускать определенные функции в приложение watchOS.

## <a name="glanceable-notification"></a>Glanceable уведомлений

Уведомление на Apple Watch предоставляют отличный, настраиваемый способ быстро информировать пользователей об события или новые данные, например входящих сообщений или достижение цели в приложении для тренировок.

С помощью уведомления, ценная информация может быть быстро представлен пользователю. Во многих ситуациях, хорошо спроектированной уведомление можно удалить необходимость фактически запустить приложение.

В watchOS 3, теперь поддерживают все уведомления:

- SpriteKit
- SceneKit
- Встроенные видео

## <a name="enhanced-ui-with-spritekit-and-scenekit"></a>Улучшенные пользовательского интерфейса с помощью SpriteKit и SceneKit

Как правило разработчик может представить игр пользовательского интерфейса при упоминаются SpriteKit и SceneKit. Тем не менее SpriteKit и SceneKit можно использовать для создания пользовательских интерфейсов, которые включают настраиваемые макеты, содержимого и анимации, которые в противном случае невозможно в WatchKit только неигровых.

Например уведомление пользователя к фотографиям, приложение для управления доступом можно использовать SpriteKit для предоставления в многофункциональном пользовательском интерфейсе, включая пользователя, разместившего рисунок, а также фактическое изображение и другие настраиваемые данные, которые обогащает взаимодействие с пользователем.

Кроме того SpriteKit и SceneKit можно одновременно использовать стандартные элементы пользовательского интерфейса WatchKit при разработке пользовательского интерфейса приложения.

## <a name="simple-navigation"></a>Простой навигации

watchOS 3 представляется несколькими способами, что разработчик может упростить навигацию в свои приложения watchOS, например к новому [вертикального разбиения по страницам](#Vertical-Paging), [поддержки распознаватель жестов](#Gesture-Recognizer-Support) и [цифровых корона Поворот](#Digital-Crown-Rotation) функции, представленной выше.

Цифровой корона уникален для Apple Watch и может использоваться различными способами, для упрощения навигации. Например приложение таймера можно использовать цифровой корона повысить эффективность поиска через доступные таймера длины.

Пользовательских жестов можно представить новых и уникальных способов, которые пользователь может взаимодействовать с приложением контрольных значений и также можно использовать для упрощения навигации приложения.

Apple предлагает стремятся объединить все новые функции быстрого взаимодействия, добавленные в watchOS 3 для представления с широкими возможностями, облегчают и ускоряют использовать интерфейсы приложений watchOS.

## <a name="finishing-the-quick-interaction"></a>Завершения быстрого взаимодействия

Хорошо спроектированные быстрое взаимодействие предоставит пользователям уверенность в том, чтобы удалить их запястья (и отключите с приложением) после завершения их текущего диалога.

Там, где это специально становится проблемой при приложении для Apple watch это любой тип сетевого подключения и обмене информацией с его сопутствующее приложение iPhone. Нередко это может привести к Индикатор ожидающего во время транзакции, который является нежелательным во время быстрого взаимодействия. Рассмотрим следующий пример:

[![](quick-interaction-techniques-images/quick07.png "Схема приложения watch, выполнив сетевого подключения и обмена информацией с его сопутствующее приложение iPhone")](quick-interaction-techniques-images/quick07.png#lightbox)

1. Пользователь выбирает элемент, чтобы приобрести в watch.
2. Они коснитесь кнопки купить.
3. Приложение запускает транзакцию сети и отображение индикатора загрузки.
4. Некоторое время спустя завершения транзакции, а приложение отображает подтверждения покупки.
5. Пользователь удаляет их запястье и отключает с приложением.

С момента, пользователь нажимает кнопку Покупка, пока транзакция завершится они имеют их запястье, который вызывается, просмотрев индикатора загрузки. Чтобы исправить эту неполадку, Apple предполагает, что разработчик должен представлять Мгновенная обратная связь пользователю вместо отображения индикатора загрузки. 

С помощью предлагаемых модели компании Apple, взгляните на попытку же быстрого взаимодействия:

[![](quick-interaction-techniques-images/quick08.png "Схема яблоки предлагаемые модели")](quick-interaction-techniques-images/quick08.png#lightbox)

1. Пользователь выбирает элемент, чтобы приобрести в watch.
2. Они коснитесь кнопки купить.
3. Приложение запускает транзакцию сети и отображает сообщение о том, что Покупка успешно запущен.
4. Пользователь удаляет их запястье и отключает с приложением.
5. Транзакции при успешном выполнении спустя некоторое время в приложении отображается локальное уведомление, чтобы информировать пользователей об успешной покупки.

Это время, как только пользователь нажимает кнопку купить, которую пользователи видят сообщение о том, что покупки был запущен, поэтому им надежное drop их запястья и заканчиваться на этом этапе быстрое взаимодействие. Позднее они получат сообщение об успехе или неудаче операции в уведомлении для пользователей. В этом случае пользователь только взаимодействует с приложением на «активно» этапах процесса.

Для приложений, которые выполняют сети, можно использовать фон `NSURLSession` для обработки сетевого взаимодействия с задачей загрузки. Это позволит приложению быть выведены из спящего режима в фоновом режиме для обработки загруженные сведения. Для приложения, которые требуют фоновой обработки используйте утверждение фоновой задачи для обработки необходимых процессов.

## <a name="quick-interaction-design-tips"></a>Советы по проектированию быстрого взаимодействия

Поскольку требуемую длину быстрое взаимодействие двух секунд или менее, разработчику следует сосредоточиться на разработке взаимодействия приложения с самого начала процесса проектирования. Найти области, где эти взаимодействия можно упростить (используя метод, представленные выше) и использовать новые возможности watchOS 3, чтобы предоставить приложение быстрого и отвечает на запросы.

Apple рекомендует придерживаться указанных ниже:

- Сосредоточиться на быстрого взаимодействия, перенос вперед наиболее часто используемых возможностей приложения.
- Используйте сложностей и уведомления для пользователей позволяет отображать общие компоненты и функции.
- Создание многофункциональных, glanceable пользовательский интерфейс с помощью SceneKit и SpriteKit.
- По возможности, упрощающие навигацию в приложении.
- Никогда не предоставляйте пользователя ожидать, позволяющие удалить их запястье и отключите с приложением, как можно скорее.

## <a name="summary"></a>Сводка

В этой статье подробно рассматривается быстрые методы взаимодействия Apple добавленные в watchOS 3, а также способы их реализации в Xamarin.iOS для Apple Watch.

## <a name="related-links"></a>Связанные ссылки

- [Примеры watchOS](https://developer.xamarin.com/samples/watchos/all/)
