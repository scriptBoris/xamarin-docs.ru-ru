---
title: Настройка пакета SDK для Android для Xamarin.Android
description: Visual Studio включает диспетчер пакетов SDK для Android, который позволяет скачивать инструменты, платформы и другие компоненты SDK, необходимые для разработки приложений Xamarin.Android.
ms.prod: xamarin
ms.assetid: 9A857F52-2EC1-414F-8010-CEE67B60A4B4
ms.technology: xamarin-android
author: mgmclemore
ms.author: mamcle
ms.date: 08/09/2018
ms.openlocfilehash: 55b6c10a9014b89534c37faeac2faf84f02339cd
ms.sourcegitcommit: b6f3e55d4f3dcdc505abc8dc9241cff0bb5bd154
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/10/2018
ms.locfileid: "43780503"
---
# <a name="setting-up-the-android-sdk-for-xamarinandroid"></a>Настройка пакета SDK для Android для Xamarin.Android

_Visual Studio включает диспетчер пакетов SDK для Android, который позволяет скачивать инструменты, платформы и другие компоненты SDK, необходимые для разработки приложений Xamarin.Android._


## <a name="overview"></a>Обзор

Это руководство описывает, как использовать диспетчер пакетов SDK для Android с Xamarin в Visual Studio и Visual Studio для Mac.

> [!NOTE]
> Это руководство распространяется только на Visual Studio 2017 и Visual Studio для Mac.  

Диспетчер пакетов SDK для Android, предназначенный для Xamarin (устанавливается в составе рабочей нагрузки **Разработка мобильных приложений на .NET**), поможет вам скачать новейшие компоненты Android, необходимые для разработки приложения Xamarin.Android. Он заменяет автономный диспетчер пакетов SDK от Google, который был признан нерекомендуемым.

# <a name="visual-studiotabvswin"></a>[Visual Studio](#tab/vswin)

## <a name="requirements"></a>Требования

Чтобы использовать диспетчер пакетов SDK Xamarin Android, необходимо следующее:

- Visual Studio 2017 (выпуск Community, Professional или Enterprise). Требуется Visual Studio 2017 версии 15.7 или более поздней.

- Инструменты Visual Studio для Xamarin версии 4.10.0 или более поздней версии (устанавливается как часть рабочей нагрузки **Разработка мобильных приложений на .NET**). 

Диспетчер пакетов SDK для Xamarin Android несовместим с Visual Studio 2015. Пользователям Visual Studio 2015 следует использовать инструменты диспетчера пакетов SDK, предоставляемые в пакете SDK для Android от Google.

Диспетчеру пакетов SDK Xamarin Android также требуется Java Development Kit (которая устанавливается автоматически вместе с Xamarin.Android). Существует несколько альтернатив JDK:

-   По умолчанию Xamarin.Android использует пакет [JDK 8](http://www.oracle.com/technetwork/java/javase/downloads/jdk8-downloads-2133151.html), который необходим при разработке для API уровня 24 или выше (JDK 8 также поддерживает уровни API ниже 24).

-   При разработке специально для уровня API 23 или ниже можно продолжать использовать пакет [JDK 7](http://www.oracle.com/technetwork/java/javase/downloads/jdk7-downloads-1880260.html).

-   Если вы используете Visual Studio 15.8 Preview 5 или более позднюю версию, вы можете вместо JDK 8 попробовать [дистрибутив OpenJDK от Майкрософт](openjdk.md) (сейчас на этапе предварительной версии).

> [!IMPORTANT]
> Xamarin.Android не поддерживает пакет JDK 9.

 
## <a name="sdk-manager"></a>Диспетчер пакетов SDK 

Чтобы запустить диспетчер пакетов SDK в Visual Studio, щелкните **Сервис > Android > Диспетчер пакетов SDK Android**:

[![Элемент меню с расположением диспетчера пакетов SDK Android](android-sdk-images/win/02-sdk-manager-menu-item-sml.png)](android-sdk-images/win/02-sdk-manager-menu-item.png#lightbox)

Диспетчер пакетов SDK для Android открывается на экране **Пакеты SDK и инструменты для Android**. Этот экран содержит две вкладки &ndash; **Платформы** и **Сервис**:

[![Снимок экрана с диспетчером пакетов SDK Android, открытым на вкладке "Платформы"](android-sdk-images/win/03-sdk-manager-platforms-sml.png)](android-sdk-images/win/03-sdk-manager-platforms.png#lightbox)

Экран **Пакеты SDK и инструменты для Android** более подробно описан в следующих разделах.


### <a name="android-sdk-location"></a>Расположение пакета SDK для Android

Расположение пакета SDK для Android настраивается в верхней части экрана **Пакеты SDK и инструменты для Android**, как показано на предыдущем снимке экрана. Это расположение нужно настроить для правильной работы вкладок **Платформы** и **Сервис**. Задание расположения пакета SDK для Android может потребоваться по одной или нескольким из следующих причин:

1. Диспетчер пакетов SDK для Android не смог найти пакет SDK для Android. 

2. Вы установили пакет SDK для Android в альтернативное расположение (отличное от используемого по умолчанию). 

Чтобы задать расположение пакета SDK для Android, щелкните кнопку с многоточием (&hellip;) справа от элемента **Расположение пакета SDK для Android**. При этом открывается диалоговое окно **Обзор папок**, в котором можно перейти к расположению пакета SDK для Android. На следующем снимке экрана выбран пакет SDK для Android в **Program Files (x86)\\Android**:

![Снимок экрана с диалоговым окном Windows "Обзор папок", указывающим расположение пакета SDK для Android](android-sdk-images/win/05-browse-for-folder.png)

При нажатии кнопки **ОК** диспетчер пакетов SDK будет работать с пакетом SDK для Android, установленным в выбранном расположении.


### <a name="tools-tab"></a>Вкладка "Сервис"

Вкладка **Сервис** отображает список _инструментов_ и _дополнений_. Эта вкладка используется для установки инструментов пакета SDK для Android, инструментов платформы и инструментов сборки.
Кроме того, можно установить эмулятор Android, низкоуровневый отладчик (LLDB), NDK, ускорение HAXM и библиотеки Google Play.


Например, чтобы скачать пакет эмулятора Android от Google, установите флажок рядом с элементом **Эмулятор Android** и нажмите кнопку **Применить изменения**:

[![Установка эмулятора Android со вкладки "Сервис"](android-sdk-images/win/06-install-emulator-sml.png)](android-sdk-images/win/06-install-emulator.png#lightbox)

Может появиться диалоговое окно с сообщением _Для установки следующего пакета требуется принять условия лицензии_:

![Экран "Принятие условий лицензионного соглашения"](android-sdk-images/win/07-license-acceptance.png)

Щелкните **Принять**, чтобы принять условия лицензионного соглашения. В нижней части окна индикатор выполнения указывает ход скачивания и установки. После завершения установки вкладка **Сервис** указывает, что выбранные инструменты и дополнения установлены.

### <a name="platforms-tab"></a>Вкладка "Платформы"

Вкладка **Платформы** содержит список версий пакетов SDK вместе с другими ресурсами (например, образами системы) для каждой платформы:

[![Снимок экрана области "Платформы"](android-sdk-images/win/08-platforms-pane-sml.png)](android-sdk-images/win/08-platforms-pane.png#lightbox)

На этом экране указана версия Android (например, **Android 8.0**), кодовое название (**Oreo**), уровень API (например, **26**) и размеры компонентов платформы (например, **1 ГБ**). Вкладка **Платформы** позволяет вам устанавливать компоненты для целевого уровня API Android. Дополнительные сведения о версиях и уровнях API Android см. в разделе [Основные сведения об уровнях API Android](~/android/app-fundamentals/android-api-levels.md).

Если установлены все компоненты платформы, рядом с ее именем появляется флажок. Если установлены не все компоненты платформы, для нее заполняется поле. Вы можете развернуть платформу, чтобы просмотреть ее компоненты (в том числе и установленные), щелкнув поле **+** слева от нее.
Щелкните **-**, чтобы свернуть список компонентов для платформы.

Чтобы добавить в пакет SDK другую платформу, щелкайте поле рядом с ней, пока в нем не появился флажок (обозначающий установку всех компонентов), а затем нажмите кнопку **Применить изменения**:

[![Пример добавления компонентов Android 7.1 Nougat в пакет SDK для Android](android-sdk-images/win/09-adding-a-platform-sml.png)](android-sdk-images/win/09-adding-a-platform.png#lightbox)

Чтобы установить только отдельные компоненты, щелкните один раз поле рядом с платформой. Затем можно выбрать любые отдельные компоненты, которые вам нужны:

[![Пример добавления компонентов Android 7.1](android-sdk-images/win/10-adding-some-components-sml.png)](android-sdk-images/win/10-adding-some-components.png#lightbox)

Обратите внимание, что число устанавливаемых компонентов отображается рядом с кнопкой **Применить изменения**. После нажатия кнопки **Применить изменения** вы увидите экран **Принятие условий лицензионного соглашения**, показанный ранее.
Щелкните **Принять**, чтобы принять условия лицензионного соглашения. Это диалоговое окно может появиться несколько раз, если устанавливается несколько компонентов. В нижней части окна индикатор выполнения указывает ход скачивания и установки. После завершения скачивания и установки (это может занять несколько минут в зависимости от числа скачиваемых компонентов) добавленные компоненты помечаются флажком и указываются в списке **Установленные**.

### <a name="respository-selection"></a>Выбор репозитория

По умолчанию диспетчер пакетов SDK для Android скачивает компоненты и инструменты платформы из репозитория, управляемого Майкрософт. Если вам нужен доступ к экспериментальным альфа- и бета-версиям платформ и инструментов, которые еще не доступны в репозитории Майкрософт, вы можете переключить диспетчер пакетов SDK на использование репозитория Google. Для этого щелкните значок шестеренки в правом нижнем углу и выберите **"Репозиторий" > "Google (не поддерживается)"**:

[![Выбор репозитория Google](android-sdk-images/win/11-google-repo-w157-sml.png)](android-sdk-images/win/11-google-repo-w157.png#lightbox)

Если выбран репозиторий Google, на вкладке **Платформы** могут отобразиться дополнительные пакеты, недоступные ранее. (На снимке экрана выше при переходе на репозиторий Google был добавлен пакет **Android SDK Platform 28**.) Обратите внимание, что репозиторий Google является неподдерживаемым, поэтому использовать его для повседневной разработки не рекомендуется.

Чтобы вернуться на поддерживаемый репозиторий платформ и инструментов, щелкните **Майкрософт (рекомендуется)**. Это восстановит список пакетов и инструментов по умолчанию.


# <a name="visual-studio-for-mactabvsmac"></a>[Visual Studio для Mac](#tab/vsmac)

## <a name="requirements"></a>Требования

Чтобы использовать диспетчер пакетов SDK Xamarin Android, необходимо следующее:

-   Visual Studio для Mac 7.5 или более поздней версии.

Диспетчеру пакетов SDK Xamarin Android также требуется Java Development Kit (которая устанавливается автоматически вместе с Xamarin.Android). Существует несколько альтернатив JDK:

-   По умолчанию Xamarin.Android использует пакет [JDK 8](http://www.oracle.com/technetwork/java/javase/downloads/jdk8-downloads-2133151.html), который необходим при разработке для API уровня 24 или выше (JDK 8 также поддерживает уровни API ниже 24).

-   При разработке специально для уровня API 23 или ниже можно продолжать использовать пакет [JDK 7](http://www.oracle.com/technetwork/java/javase/downloads/jdk7-downloads-1880260.html).

-   Если у вас установлена среда Visual Studio для Mac 7.7 или более поздняя версия, попробуйте вместо JDK 8 использовать [дистрибутив OpenJDK от Майкрософт](openjdk.md) (сейчас на этапе предварительной версии).

> [!IMPORTANT]
> Xamarin.Android не поддерживает пакет JDK 9.
 
## <a name="sdk-manager"></a>Диспетчер пакетов SDK 

Чтобы запустить диспетчер пакетов SDK в Visual Studio для Mac, щелкните **Сервис > Диспетчер пакетов SDK**:
 
[![Элемент меню с расположением диспетчера пакетов SDK Android](android-sdk-images/mac/01-sdk-manager-menu-item-m75-sml.png)](android-sdk-images/mac/01-sdk-manager-menu-item-m75.png#lightbox)

**Диспетчер пакетов SDK Android** открывается в **окне параметров**, содержащем три вкладки — **Платформы**, **Сервис** и **Расположения**:

[![Снимок экрана с диспетчером пакетов SDK Android, открытым на вкладке "Платформы"](android-sdk-images/mac/02-sdk-manager-platforms-m75-sml.png)](android-sdk-images/mac/02-sdk-manager-platforms-m75.png#lightbox)

Вкладки диспетчера пакетов SDK для Android описаны в следующих разделах.


### <a name="locations-tab"></a>Вкладка "Расположения"

Вкладка **Расположения** содержит три параметра для настройки расположений пакета SDK для Android, пакета NDK для Android и пакет SDK для Java (JDK). Эти расположения нужно настроить для правильной работы вкладок **Платформы** и **Сервис**.

При запуске диспетчер пакетов SDK автоматически определяет путь для каждого установленного пакета и указывает, что он был **обнаружен**, размещая зеленую галочку рядом с путем:

[![Снимок экрана вкладки "Расположения"](android-sdk-images/mac/03-locations-tab-m75-sml.png)](android-sdk-images/mac/03-locations-tab-m75.png#lightbox)

Нажмите кнопку **Сбросить к значениям по умолчанию**, чтобы диспетчер пакетов SDK искал пакеты SDK, NDK и JDK в расположениях по умолчанию. 

Как правило, вкладка **Расположения** используется, чтобы изменить расположение пакета SDK для Android и (или) пакета JDK для Java. Вам не нужно устанавливать пакет NDK для разработки приложений Xamarin.Android &ndash; NDK используется только в том случае, когда нужно разрабатывать части приложения с использованием языков машинного кода, таких как C и C++.

### <a name="tools-tab"></a>Вкладка "Сервис"

Вкладка **Сервис** отображает список _инструментов_ и _дополнений_. Эта вкладка используется для установки инструментов пакета SDK для Android, инструментов платформы и инструментов сборки.
Кроме того, можно установить эмулятор Android, низкоуровневый отладчик (LLDB), NDK, ускорение HAXM и библиотеки Google Play.

Например, чтобы скачать пакет эмулятора Android от Google, установите флажок рядом с элементом **Эмулятор Android** и нажмите кнопку **Применить изменения**:

[![Установка эмулятора Android со вкладки "Сервис"](android-sdk-images/mac/04-tools-tab-m75-sml.png)](android-sdk-images/mac/04-tools-tab-m75.png#lightbox)

Может появиться диалоговое окно с сообщением _Для установки следующего пакета требуется принять условия лицензии_:

[![Экран "Принятие условий лицензионного соглашения"](android-sdk-images/mac/05-license-acceptance-m75-sml.png)](android-sdk-images/mac/05-license-acceptance-m75.png#lightbox)

Щелкните **Принять**, чтобы принять условия лицензионного соглашения. В нижней части окна индикатор выполнения указывает ход скачивания и установки. После завершения установки вкладка **Сервис** указывает, что выбранные инструменты и дополнения установлены.


### <a name="platforms-tab"></a>Вкладка "Платформы"

Вкладка **Платформы** содержит список версий пакетов SDK вместе с другими ресурсами (например, образами системы) для каждой платформы:

[![Снимок экрана области "Платформы"](android-sdk-images/mac/06-platforms-tab-m75-sml.png)](android-sdk-images/mac/06-platforms-tab-m75.png#lightbox)

На этом экране указана версия Android (например, **Android 8.1**), кодовое название (**Oreo**), уровень API (например, **27**) и размеры компонентов платформы (например, **1 ГБ**). Вкладка **Платформы** позволяет вам устанавливать компоненты для целевого уровня API Android. Дополнительные сведения о версиях и уровнях API Android см. в разделе [Основные сведения об уровнях API Android](~/android/app-fundamentals/android-api-levels.md).

Если установлены все компоненты платформы, рядом с ее именем появляется флажок. Если установлены не все компоненты платформы, для нее заполняется поле. Вы можете развернуть платформу, чтобы просмотреть ее компоненты (в том числе и установленные), щелкнув **стрелку** слева от нее.
Щелкните **стрелку вниз**, чтобы свернуть список компонентов для платформы.

Чтобы добавить в пакет SDK другую платформу, щелкайте поле рядом с ней, пока в нем не появился флажок (обозначающий установку всех компонентов), а затем нажмите кнопку **Применить изменения**:

[![Пример добавления всех компонентов платформы](android-sdk-images/mac/07-install-all-m75-sml.png)](android-sdk-images/mac/07-install-all-m75.png#lightbox)

Чтобы установить только отдельные компоненты, щелкните один раз поле рядом с платформой. Затем можно выбрать любые отдельные компоненты, которые вам нужны:

[![Пример добавления отдельных компонентов](android-sdk-images/mac/08-individual-components-m75-sml.png)](android-sdk-images/mac/08-individual-components-m75.png#lightbox)

Обратите внимание, что число устанавливаемых компонентов отображается рядом с кнопкой **Применить изменения**. После нажатия кнопки **Применить изменения** вы увидите экран **Принятие условий лицензионного соглашения**, показанный ранее.
Щелкните **Принять**, чтобы принять условия лицензионного соглашения. Это диалоговое окно может появиться несколько раз, если устанавливается несколько компонентов. В нижней части окна индикатор выполнения указывает ход скачивания и установки. После завершения скачивания и установки (это может занять несколько минут в зависимости от числа скачиваемых компонентов) добавленные компоненты помечаются флажком и указываются в списке **Установленные**.

### <a name="respository-selection"></a>Выбор репозитория

По умолчанию диспетчер пакетов SDK для Android скачивает компоненты и инструменты платформы из репозитория, управляемого Майкрософт. Если вам нужен доступ к экспериментальным альфа- и бета-версиям платформ и инструментов, которые еще не доступны в репозитории Майкрософт, вы можете переключить диспетчер пакетов SDK на использование репозитория Google. Для этого щелкните значок шестеренки в правом нижнем углу и выберите **"Репозиторий" > "Google (не поддерживается)"**:

[![Выбор репозитория Google](android-sdk-images/mac/09-google-repo-m75-sml.png)](android-sdk-images/mac/09-google-repo-m75.png#lightbox)

Если выбран репозиторий Google, на вкладке **Платформы** могут отобразиться дополнительные пакеты, недоступные ранее. (На снимке экрана выше при переходе на репозиторий Google был добавлен пакет **Android SDK Platform 28**.) Обратите внимание, что репозиторий Google является неподдерживаемым, поэтому использовать его для повседневной разработки не рекомендуется.

Чтобы вернуться на поддерживаемый репозиторий платформ и инструментов, щелкните **Майкрософт (рекомендуется)**. Это восстановит список пакетов и инструментов по умолчанию.

-----

 
## <a name="summary"></a>Сводка

В этом руководстве вы узнали, как устанавливать и использовать диспетчер пакетов SDK для Android с Xamarin в Visual Studio и Visual Studio для Mac.


## <a name="related-links"></a>Связанные ссылки

- [Общие сведения об уровнях API Android](~/android/app-fundamentals/android-api-levels.md)
- [Изменения в инструментарии пакета SDK для Android](~/android/troubleshooting/sdk-cli-tooling-changes.md)
