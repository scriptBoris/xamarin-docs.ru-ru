---
title: Отладка приложений в Android Emulator
description: Это руководство описывает запуск и отладку приложений в Visual Studio с помощью Android Emulator.
ms.prod: xamarin
ms.assetid: AEA165A4-D81A-411B-91DF-2DED2EED27B5
ms.technology: xamarin-android
author: conceptdev
ms.author: crdun
ms.date: 06/22/2018
ms.openlocfilehash: e40178e43cfcfd261434fab9dd5ca0a9061d3f59
ms.sourcegitcommit: e268fd44422d0bbc7c944a678e2cc633a0493122
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/25/2018
ms.locfileid: "50113786"
---
# <a name="debugging-on-the-android-emulator"></a>Отладка приложений в Android Emulator

_Это руководство описывает, как запустить виртуальное устройство в Android Emulator для отладки и тестирования вашего приложения._

## <a name="overview"></a>Обзор

Для имитации разнообразных устройств с Android эмулятор Android Emulator (устанавливаемый с рабочей нагрузкой **Разработка мобильных приложений на .NET**) можно запускать в различных конфигурациях. Каждая из этих конфигураций создается в виде _виртуального устройства_. В этом руководстве вы узнаете, как открыть эмулятор из Visual Studio и запустить приложение на виртуальном устройстве. Информацию о настройке Android Emulator и создании виртуальных устройств см. в статье [Настройка Android Emulator](~/android/get-started/installation/android-emulator/index.md).


## <a name="using-a-pre-configured-virtual-device"></a>Использование предварительно настроенного виртуального устройства

# <a name="visual-studiotabwindows"></a>[Visual Studio](#tab/windows)

В состав Visual Studio входят предварительно настроенные виртуальные устройства, которые отображаются в раскрывающемся меню устройства. Например, на следующем снимке экрана Visual Studio 2017 доступно несколько предварительно настроенных виртуальных устройств:

-   **VisualStudio\_android-23\_arm\_phone**

-   **VisualStudio\_android-23\_arm\_tablet**

-   **VisualStudio\_android-23\_x86\_phone** 

-   **VisualStudio\_android-23\_x86\_tablet** 

[![Виртуальные устройства](debug-on-emulator-images/win/01-virtual-devices-sml.png)](debug-on-emulator-images/win/01-virtual-devices.png#lightbox)

Как правило, для тестирования и отладки приложения для телефона следует выбрать виртуальное устройство **VisualStudio\_android-23\_x86\_phone**. Если одно из этих предварительно настроенных виртуальных устройств соответствует вашим требованиям (т. е. соответствует целевому уровню API приложения), перейдите к разделу [Запуск эмулятора](#launching), чтобы приступить к запуску приложения в эмуляторе. (Если вы еще не знакомы с уровнями API Android, см. сведения в статье [Основные сведения об уровнях API Android](~/android/app-fundamentals/android-api-levels.md).)

Если в проекте Xamarin.Android используется уровень целевой платформы, несовместимый с доступными виртуальными устройствами, непригодные для использования виртуальные устройства отображаются в разделе **Неподдерживаемые устройства** раскрывающегося меню. Например, для следующего проекта целевой платформой является **Android Nougat 7.1 (API 25)**, которая несовместима с указанными в этом примере виртуальными устройствами **Android 6.0**:

[![Несовместимое виртуальное устройство](debug-on-emulator-images/win/02-incompatible-level-sml.png)](debug-on-emulator-images/win/02-incompatible-level.png#lightbox)

Чтобы изменить минимальную версию Android в соответствии с уровнем API доступных виртуальных устройств, щелкните **Изменить минимальную целевую версию Android**. Кроме того, с помощью [Android Device Manager](~/android/get-started/installation/android-emulator/device-manager.md) можно создать виртуальные устройства, которые поддерживают целевой уровень API.
Перед настройкой виртуальных устройств для нового уровня API сначала нужно установить соответствующие образы системы для этого уровня API (см. раздел [Настройка пакета SDK для Android для Xamarin.Android](~/android/get-started/installation/android-sdk.md)).

# <a name="visual-studio-for-mactabmacos"></a>[Visual Studio для Mac](#tab/macos)

В состав Visual Studio для Mac входят предварительно настроенные виртуальные устройства, которые отображаются в раскрывающемся меню устройства. Например, на следующем снимке экрана Visual Studio 2017 доступны два предварительно настроенных виртуальных устройства:

-   **Android\_Accelerated\_x86**

-   **Android\_ARMv7a**

[![Виртуальные устройства](debug-on-emulator-images/mac/01-virtual-devices-sml.png)](debug-on-emulator-images/mac/01-virtual-devices.png#lightbox)

Как правило, для тестирования и отладки приложения для телефона следует выбрать виртуальное устройство **Android\_Accelerated\_x86**. Если это предварительно настроенное виртуальное устройство соответствует вашим требованиям (т. е. соответствует целевому уровню API приложения), перейдите к разделу [Запуск эмулятора](#launching), чтобы приступить к запуску приложения в эмуляторе. (Если вы еще не знакомы с уровнями API Android, см. сведения в статье [Основные сведения об уровнях API Android](~/android/app-fundamentals/android-api-levels.md).)

-----

## <a name="editing-virtual-devices"></a>Изменение виртуальных устройств

Для изменения (или создания) виртуальных устройств нужно использовать [Android Device Manager](~/android/get-started/installation/android-emulator/device-manager.md).


<a name="launching" />

## <a name="launching-the-emulator"></a>Запуск эмулятора

В верхней части Visual Studio находится раскрывающееся меню для выбора режима **Отладка** или **Выпуск**. При выборе режима **Отладка** отладчик подключается в процессу приложения, выполняемому в эмуляторе, после запуска приложения. При выборе режима **Выпуск** отладчик отключается (однако вы все равно можете запустить приложение и использовать операторы журнала для отладки). После выбора виртуального устройства в раскрывающемся меню устройств выберите режим **Отладка** или **Выпуск**, а затем нажмите кнопку "Воспроизведение", чтобы запустить приложение:

# <a name="visual-studiotabwindows"></a>[Visual Studio](#tab/windows)

[![Режимы "Отладка" и "Выпуск", кнопка "Воспроизведение"](debug-on-emulator-images/win/17-debug-release-sml.png)](debug-on-emulator-images/win/17-debug-release.png#lightbox)

# <a name="visual-studio-for-mactabmacos"></a>[Visual Studio для Mac](#tab/macos)

[![Режимы "Отладка" и "Выпуск", кнопка "Воспроизведение"](debug-on-emulator-images/mac/16-debug-release-sml.png)](debug-on-emulator-images/mac/16-debug-release.png#lightbox)

-----

После запуска эмулятора Xamarin.Android развернет в нем приложение. Эмулятор выполняет приложение с настроенным образом виртуального устройства. Ниже приведен пример снимка экрана Android Emulator. В данном примере в эмуляторе выполняется пустое приложение **MyApp**:

![Эмулятор, выполняющий пустое приложение](debug-on-emulator-images/emulator-running.png)

Эмулятор можно оставить в рабочем режиме. Необязательно завершать его работу и ожидать его перезапуска при каждом запуске приложения. При первом запуске приложения Xamarin.Android в эмуляторе устанавливается общая среда выполнения Xamarin.Android для целевого уровня API, после чего устанавливается приложение. Установка среды выполнения может занять несколько минут. Установка среды выполнения происходит только при первом развертывании приложения Xamarin.Android в эмуляторе &ndash;, последующие развертывания выполняются быстрее, поскольку в эмулятор копируется только приложение.

<a name="quick-boot" />

## <a name="quick-boot"></a>Быстрая загрузка

Более новые версии Android Emulator поддерживают _быструю загрузку_, которая запускает эмулятор за несколько секунд. При закрытии эмулятора она создает моментальный снимок состояния виртуального устройства, чтобы его можно было быстро восстановить при перезапуске.
Чтобы воспользоваться этой функцией, необходимо следующее:

-   Android Emulator версии 27.0.2 или более поздней
-   Android SDK Tools версии 26.1.1 или более поздней

После установки указанных выше версий эмулятора и средств SDK функция быстрой загрузки включена по умолчанию. 

Первый холодный запуск виртуального устройства выполняется без повышения производительности, так как моментальный снимок еще не создан:

![Снимок экрана холодного запуска](debug-on-emulator-images/cold-boot.png)

При выходе из эмулятора функция быстрой загрузки сохраняет его состояние в моментальном снимке:

![Сохранение состояния при завершении работы](debug-on-emulator-images/saving-state.png)

Впоследствии виртуальное устройство запускается гораздо быстрее, так как эмулятор просто восстанавливает состояние, актуальное на момент завершения работы.

![Загрузка состояния при перезапуске](debug-on-emulator-images/loading-state.png)


## <a name="troubleshooting"></a>Устранение неполадок

Советы и способы решения распространенных проблем в эмуляторе см. в разделе [Устранение неполадок Android Emulator](~/android/get-started/installation/android-emulator/troubleshooting.md).


## <a name="summary"></a>Сводка

Это руководство описывает процесс настройки Android Emulator для запуска и тестирования приложений Xamarin.Android. В нем рассмотрены шаги по запуску эмулятора с использованием предварительно настроенных виртуальных устройств и приведены действия по развертыванию приложения в эмуляторе из Visual Studio. 

Дополнительные сведения об использовании Android Emulator см. в следующих разделах для разработчиков под Android.

-   [Навигация по экрану](https://developer.android.com/studio/run/emulator.html#navigate)

-   [Выполнение основных задач в эмуляторе](https://developer.android.com/studio/run/emulator.html#tasks)

-   [Работа с расширенными элементами управления, параметрами и справкой](https://developer.android.com/studio/run/emulator.html#extended)

-   [Запуск эмулятора с использованием быстрой загрузки](https://developer.android.com/studio/run/emulator#quickboot)
